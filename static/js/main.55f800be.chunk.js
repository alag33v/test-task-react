(this["webpackJsonptest-task-react"]=this["webpackJsonptest-task-react"]||[]).push([[0],{48:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(0),s=t.n(r),a=t(17),i=t.n(a),o=t(12),l=t(32),b=t(16),u=t(14),d="SET_TICKETS",h={tickets:[]},j=Object(o.b)({tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case d:return Object(u.a)(Object(u.a)({},e),{},{tickets:[].concat(Object(b.a)(e.tickets),[n.payload])});default:return e}}}),p=t(10),x=t(33),f=t.p+"static/media/logo.1da79cb6.PNG",g=t(5),O=t(6);function m(){var e=Object(g.a)(["\n  text-align: center;\n  img {\n    display: inline-block;\n    margin: 30px auto;\n    cursor: pointer;\n  }\n"]);return m=function(){return e},e}var k=O.b.div(m()),w=function(){return Object(c.jsx)(k,{children:Object(c.jsx)("img",{src:f,alt:"logo"})})},v=t.p+"static/media/check.09eaa8c6.svg";function y(){var e=Object(g.a)(["\n  width: 25%;\n  padding: 15px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  border-radius: 0.25rem;\n  max-height: 334px;\n  h4 {\n    font-size: 16px;\n    text-transform: uppercase;\n    margin: 10px 0 22px;\n  }\n  label {\n    display: block;\n    margin-bottom: 22px;\n    padding-left: 35px;\n    cursor: pointer;\n  }\n  strong {\n    font-weight: 400;\n  }\n  a {\n    text-decoration: none;\n    color: #212529;\n  }\n  .checkbox {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n    clip: rect(0 0 0 0);\n    padding-left: 20px;\n  }\n  .check-style {\n    width: 22px;\n    height: 22px;\n    border: 1px solid #bcd2de;\n    border-radius: 2px;\n    position: absolute;\n    margin-left: -35px;\n  }\n  .checkbox:checked + .check-style {\n    border: 1px solid #39a1f4;\n  }\n  .checkbox:checked + .check-style::before {\n    content: '';\n    width: 14px;\n    height: 14px;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: url(",");\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: center;\n    position: absolute;\n  }\n  @media (max-width: 767px) {\n    width: 100%;\n    margin-bottom: 20px;\n  }\n  @media (max-width: 600px) {\n    width: 95%;\n    max-width: 100%;\n    margin: 0 auto 20px;\n  }\n"]);return y=function(){return e},e}var N=O.b.div(y(),v),S=function(e){var n=e.filter,t=e.setFilter,r=function(e){var c=Object(u.a)({},n);c[e]=!c[e],"all"===e?c=Object.fromEntries(Object.keys(c).map((function(n){return[n,c[e]]}))):(Object.keys(c).some((function(e){return!1===c[e]}))&&(c.all=!1),Object.keys(c).every((function(e){return"all"===e||!0===c[e]}))&&(c.all=!0)),t(Object(u.a)({},c))};return Object(c.jsxs)(N,{children:[Object(c.jsx)("h4",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{className:"checkbox",type:"checkbox",onChange:function(){return r("all")},checked:n.all}),Object(c.jsx)("span",{className:"check-style"}),Object(c.jsx)("strong",{children:"\u0412\u0441\u0435"})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{className:"checkbox",type:"checkbox",onChange:function(){return r("without")},checked:n.without}),Object(c.jsx)("span",{className:"check-style"}),Object(c.jsx)("strong",{children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{className:"checkbox",type:"checkbox",onChange:function(){return r("one")},checked:n.one}),Object(c.jsx)("span",{className:"check-style"}),Object(c.jsx)("strong",{children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{className:"checkbox",type:"checkbox",onChange:function(){return r("two")},checked:n.two}),Object(c.jsx)("span",{className:"check-style"}),Object(c.jsx)("strong",{children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{className:"checkbox",type:"checkbox",onChange:function(){return r("three")},checked:n.three}),Object(c.jsx)("span",{className:"check-style"}),Object(c.jsx)("strong",{children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})},E=t(22),C=t.n(E),D=t(31);function _(){var e=Object(g.a)(["\n  width: 73%;\n  margin-left: 2%;\n  @media (max-width: 767px) {\n    width: 100%;\n    margin-left: 0;\n  }\n  @media (max-width: 600px) {\n    width: 95%;\n    max-width: 100%;\n    margin: 0 auto;\n  }\n"]);return _=function(){return e},e}var T=O.b.div(_()),F=function(e){var n=e.filter,t=Object(r.useState)(),s=Object(p.a)(t,2),a=s[0],i=s[1],o=Object(r.useState)([]),l=Object(p.a)(o,2),u=l[0],d=l[1],h=Object(r.useState)(!1),j=Object(p.a)(h,2),x=j[0],f=j[1],g=Object(r.useState)([]),O=Object(p.a)(g,2),m=O[0],k=O[1],w=Object(r.useState)({lowprice:!0,faster:!1}),v=Object(p.a)(w,2),y=v[0],N=v[1],S=Object(r.useCallback)((function(e){return y.lowprice?e.sort((function(e,n){return e.price-n.price})):y.faster?e.sort((function(e,n){return e.segments[0].duration+e.segments[1].duration-(n.segments[0].duration+n.segments[1].duration)})):e}),[y]),E=Object(r.useCallback)((function(e){return Object.keys(n).every((function(e){return!1===n[e]}))?e:e.filter((function(e){return n.all?e:!(!n.without||0!==e.segments[0].stops.length||0!==e.segments[1].stops.length)||(!(!n.one||1!==e.segments[0].stops.length||1!==e.segments[1].stops.length)||(!(!n.two||2!==e.segments[0].stops.length||2!==e.segments[1].stops.length)||!(!n.three||3!==e.segments[0].stops.length||3!==e.segments[1].stops.length)))}))}),[n]);return Object(r.useEffect)((function(){!0===x&&k(S(E(u)).slice(0,5))}),[x,u,y,S,E]),Object(r.useEffect)((function(){fetch("https://front-test.beta.aviasales.ru/search").then((function(e){return e.json()})).then((function(e){return i(e.searchId)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){if(a&&!1===x){var e=function(){var n=Object(D.a)(C.a.mark((function n(){var t,c;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(a));case 2:if(500!==(t=n.sent).status){n.next=8;break}return n.next=6,e();case 6:n.next=24;break;case 8:if(404!==t.status){n.next=11;break}n.next=24;break;case 11:if(200===t.status){n.next=19;break}return console.error(t.statusText),n.next=15,new Promise((function(e){return setTimeout(e,1e3)}));case 15:return n.next=17,e();case 17:n.next=24;break;case 19:return n.next=21,t.json();case 21:(c=n.sent).stop&&f(!0),d([].concat(Object(b.a)(u),Object(b.a)(c.tickets)));case 24:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e()}}),[a,u,x]),Object(c.jsxs)(T,{children:[Object(c.jsx)(L,{sorterActive:y,setSorterActive:N}),m.map((function(e,n){return Object(c.jsx)(A,{ticket:e},n)}))]})},z=t(51);function I(){var e=Object(g.a)(["\n  width: 100%;\n  background-color: #fff;\n  .card {\n    width: 100%;\n    margin: 20px 0;\n    padding: 0 15px;\n  }\n  .card-title {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .cost {\n    font-size: 30px;\n    color: #2196f3;\n  }\n  img {\n    display: block;\n    max-width: 100%;\n    object-fit: cover;\n  }\n  .wrapper {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: space-between;\n  }\n  .ticket-info {\n    display: flex;\n    justify-content: space-between;\n    margin: 15px 0;\n  }\n  .up {\n    color: #aebcc3;\n  }\n  .bottom {\n    color: #707070;\n  }\n  span {\n    display: block;\n  }\n  @media (max-width: 500px) {\n    .card-body {\n      padding: 0;\n    }\n  }\n  @media (max-width: 400px) {\n    .cost {\n      font-size: 26px;\n    }\n    img {\n      width: 140px;\n    }\n    .ticket-info {\n      font-size: 14px;\n    }\n  }\n"]);return I=function(){return e},e}var M=O.b.div(I()),A=function(e){var n=e.ticket;return Object(c.jsx)(M,{children:Object(c.jsx)(z.a,{children:Object(c.jsxs)(z.a.Body,{children:[Object(c.jsxs)("div",{className:"card-title",children:[Object(c.jsx)("strong",{className:"cost",children:n.price.toString().split("").reverse().reduce((function(e,n,t){return t%3===0?n+" "+e:n+e}),"P ").split("").join("")}),Object(c.jsx)("img",{src:"//pics.avs.io/99/36/".concat(n.carrier,".png"),alt:""})]}),Object(c.jsx)("div",{className:"wrapper",children:n.segments.map((function(e,n){return Object(c.jsxs)("div",{className:"ticket-info",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"up",children:"".concat(e.destination," - ").concat(e.origin)}),Object(c.jsx)("span",{className:"bottom",children:new Date(e.date).getHours()+":"+new Date(e.date).getMinutes()+" - "+new Date(new Date(e.date).setHours(new Date(e.date).getHours()+Math.ceil(e.duration/60))).getHours()+":"+new Date(new Date(e.date).setMinutes(new Date(e.date).getMinutes()+e.duration)).getMinutes()})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"up",children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(c.jsx)("span",{className:"bottom",children:Math.ceil(e.duration/60)+":"+e.duration%60})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"up",children:0===e.stops.length?"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e.stops.length?"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":e.stops.length>=2?"".concat(e.stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"):""}),Object(c.jsx)("span",{className:"bottom",children:e.stops.join(", ")})]})]},n)}))})]})})})};function P(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  button {\n    width: 50%;\n    height: 60px;\n  }\n  .button {\n    font-size: 1rem;\n    font-weight: 400;\n    line-height: 1.5;\n    text-align: center;\n    color: #000;\n    background-color: rgb(255, 255, 255);\n    border: 1px solid rgba(0, 0, 0, 0.125);\n    border-radius: 0.25rem;\n    display: inline-block;\n    padding: 0.375rem 0.75rem;\n    transition: 0.3s linear;\n    outline: none;\n    &:hover {\n      background-color: rgb(228, 228, 228);\n    }\n    &:active {\n      background-color: rgb(207, 207, 207);\n    }\n  }\n  .btn-light {\n    border: 1px solid rgba(0, 0, 0, 0.125);\n  }\n  .lowprice,\n  .faster {\n    color: #fff;\n    background-color: #007bff;\n    &:hover {\n      background-color: #025bc2;\n    }\n    &:active {\n      background-color: #004aa0;\n    }\n  }\n"]);return P=function(){return e},e}var H=O.b.div(P()),L=function(e){var n=e.sorterActive,t=e.setSorterActive,s=Object(r.useCallback)((function(e){n[e]||t({lowprice:!n.lowprice,faster:!n.faster})}),[n,t]);return Object(c.jsxs)(H,{children:[Object(c.jsx)("button",{className:"button ".concat(n.lowprice?"lowprice":""),onClick:function(){return s("lowprice")},children:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"}),Object(c.jsx)("button",{className:"button ".concat(n.faster?"faster":""),onClick:function(){return s("faster")},children:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"})]})},X=(t(46),t(49)),B=t(50),J=function(){var e=Object(r.useState)({all:!0,without:!0,one:!0,two:!0,three:!0}),n=Object(p.a)(e,2),t=n[0],s=n[1];return Object(c.jsx)(x.a,{children:Object(c.jsxs)(X.a,{children:[Object(c.jsx)(w,{}),Object(c.jsxs)(B.a,{children:[Object(c.jsx)(S,{filter:t,setFilter:s}),Object(c.jsx)(F,{filter:t,setFilter:s})]})]})})};function R(){var e=Object(g.a)(["\n@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap');\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 16px;\n  line-height: 1.5;\n  margin-top: 25px;\n  background-color: #F3F7FA;\n  min-height: 100vh;\n}\n\n@media (max-width: 767px) {\n  .row {\n    flex-direction: column;\n  }\n}\n"]);return R=function(){return e},e}var U=Object(O.a)(R()),V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,52)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,s=n.getLCP,a=n.getTTFB;t(e),c(e),r(e),s(e),a(e)}))},G=Object(o.d)(j,Object(o.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(Object(c.jsx)(l.a,{store:G,children:Object(c.jsxs)(s.a.StrictMode,{children:[Object(c.jsx)(U,{}),Object(c.jsx)(J,{})]})}),document.getElementById("root")),V()}},[[48,1,2]]]);
//# sourceMappingURL=main.55f800be.chunk.js.map